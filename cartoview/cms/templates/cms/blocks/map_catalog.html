{% load wagtailcore_tags wagtailimages_tags i18n %}
{% load static from staticfiles %}

<link href="{% static 'cms/blocks/map_catalog.css' %}" rel="stylesheet"/>

<div class="container">
    <div class="row">
        <div class="col-md-12 ml-auto">
            <div class="title">
                <h1>{{ self.title }}</h1>
            </div>
            <form action="" autocomplete="off" class="form-horizontal" method="post" accept-charset="utf-8">
                <div class="input-group">
                    <input name="searchtext" placeholder="Search for Maps" value="" class="form-control" type="text">
                    <span class="input-group-btn">
               <button class="btn btn-white btn-raised btn-fab btn-round" type="submit" id="mapSearch">
                   <i class="material-icons">search</i>
               </button>
            </span>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2"><p style="text-align: left">Popular Tags:</p></div>
        <div class="col-md-10" style="text-align: right">
            {{ tags }}
            <a href="#"><span class="badge badge-pill badge-secondary">Secondary</span></a>
            <a href="#"><span class="badge badge-pill badge-primary">Primary</span></a>
            <a href="#"><span class="badge badge-pill badge-info">Info</span></a>
            <a href="#"><span class="badge badge-pill badge-danger">Danger</span></a>
            <a href="#"><span class="badge badge-pill badge-dark">Dark</span></a>
            <a href="#"><span class="badge badge-pill badge-default">Default</span></a>
            <a href="#"><span class="badge badge-pill badge-warning">Warning</span></a>
            <a href="#"><span class="badge badge-pill badge-rose">Rose</span></a>
            <a href="#"><span class="badge badge-pill badge-success">Success</span></a>
        </div>
    </div>

    {% for featured_map in self.featured_maps %}
        <hr/>
        {% if not forloop.counter|divisibleby:2 %}
            <div class="row">
                <div class="col-md-6">
                    <div class="map-catalog-image">
                        <a target="_blank" href="{% url 'maps:map_view' map_id=featured_map.id %}">
                            {% if featured_map.featured_image %}
                                <img src="{{ featured_map.featured_image.url }}" alt="Map">
                            {% elif featured_map.thumbnail %}
                                <img src="{{ featured_map.thumbnail.url }}" alt="Map">
                            {% else %}
                                <img src="{% static 'cartoview/img/default-map-image.jpg' %}" alt="Map">
                            {% endif %}
                        </a>
                    </div>
                </div>
                <div class="col-md-5 col-md-offset-1">
                    <h3 class="title no-top-margin">
                        <a target="_blank"
                           href="{% url 'maps:map_view' map_id=featured_map.id %}">{{ featured_map.title }}</a>
                    </h3>
                    <p>
                        {{ featured_map.description }}
                    </p>
                </div>
            </div>
        {% else %}
            <div class="row">
                <div class="col-md-6 col-md-offset-1">
                    <h3 class="title no-top-margin">
                        <a target="_blank"
                           href="{% url 'maps:map_view' map_id=featured_map.id %}">{{ featured_map.title }}</a>
                    </h3>
                    <p>
                        {{ featured_map.description }}
                    </p>
                </div>
                <div class="col-md-6 col-md-offset-1">
                    <div class="map-catalog-image">
                        <a target="_blank" href="{% url 'maps:map_view' map_id=featured_map.id %}">
                            {% if featured_map.featured_image %}
                                <img src="{{ featured_map.featured_image.url }}" alt="Map">
                            {% elif featured_map.thumbnail %}
                                <img src="{{ featured_map.thumbnail.url }}" alt="Map">
                            {% else %}
                                <img src="{% static 'cartoview/img/default-map-image.jpg' %}" alt="Map">
                            {% endif %}
                        </a>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}


</div>